"use strict";const resultsList=document.querySelector(".js-results-list"),inputAnime=document.querySelector(".js-input"),btnSearch=document.querySelector(".js-btn-search"),favoriteList=document.querySelector(".js-favorite-list");let dataAnimes=[],favoritesAnimes=[];const handleClickSearch=e=>{e.preventDefault(),getDataApi(inputAnime.value.toLowerCase())};function listenerAnimes(){const e=document.querySelectorAll(".js-list-anime");for(const t of e)t.addEventListener("click",handleClickAnime)}function handleClickAnime(e){const t=parseInt(e.currentTarget.id),i=dataAnimes.find(e=>e.mal_id===t),n=favoritesAnimes.findIndex(e=>e.mal_id===t);-1===n?favoritesAnimes.push(i):favoritesAnimes.splice(n,1),localStorage.setItem("favorites_anime",JSON.stringify(favoritesAnimes)),renderAnime(),renderFavoriteAnime()}function renderAnime(){let e="",t="";for(const i of dataAnimes){let n=animeImage(i);t=-1!==favoritesAnimes.findIndex(e=>i.mal_id===e.mal_id)?"favorite-click":"",e+=` <li class="js-list-anime anime__results-list ${t}" id="${i.mal_id}">`,e+=' <div class="js-container-anime">',e+=` <h3 class="anime__results-list-title">${i.title}</h3>`,e+=` <img class="anime_img" src="${n}" alt="Portada de la serie de anime ${i.title}" title="Portada de la serie de anime ${i.title}"/>`,e+="</div></li>"}resultsList.innerHTML=e,listenerAnimes()}function animeImage(e){return"https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"===e.images.jpg.image_url?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":e.images.jpg.image_url}function renderFavoriteAnime(){let e=JSON.parse(localStorage.getItem("favorites_anime"));favoriteList.innerHTML=e}function getDataApi(e){fetch("https://api.jikan.moe/v4/anime?q="+e).then(e=>e.json()).then(e=>{dataAnimes=e.data,renderAnime()})}btnSearch.addEventListener("click",handleClickSearch);const btnReset=document.querySelector(".js-btn-reset");function handleClickReset(e){e.preventDefault(),inputAnime.value="",resultsList.innerHTML=""}btnReset.addEventListener("click",handleClickReset);